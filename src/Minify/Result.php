<?php

namespace Support\Minify;

use Core\Interface\DataInterface;
use Stringable, DateTimeImmutable;

/**
 * Generated by a {@see \Support\Minify} class.
 *
 * Contains the minified string, sources used, and a status report.
 *
 * @internal
 * @author Martin Nielsen
 */
final readonly class Result implements DataInterface, Stringable
{
    public DateTimeImmutable $timestamp;

    public Report $report;

    public function __construct(
        public string $key,
        public string $hash,
        public string $version,
        public string $string,
        Report|string $report,
    ) {
        $this->report    = $report instanceof Report ? $report : \unserialize( $report );
        $this->timestamp = $this->report->timestamp;
    }

    public function __toString() : string
    {
        return $this->string;
    }
}
